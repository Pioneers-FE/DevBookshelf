## 38장 브라우저의 렌더링 과정

브라우저가 HTML, CSS, JS로 작성된 문서를 파싱 렌더링 한다.

### 38.1. 요청과 응답

브라우저가 서버에 리소스 요청 -> 응답

### 38.2 HTTP 1.1과 HTTP 2.0

HTTP 1.1 : 커넥션 하나당 하나의 요청 응답, 여러 개의 리소스 요청에 개별 요청, 응답하여 응답 시간의 증가

HTTP 2.0 : 여러 리소스 동시 전송 가능

### 38.3 HTML 파싱과 DOM 생성

응답 받은 HTML 문서 파싱 -> DOM 생성

### 38.4 CSS 파싱과 CSSOM 생성

DOM 생성중 CSS link, style 태그를 만나면 DOM 생성 중지

태그에 있는 CSS 파일 요청 -> HTML 처럼 CSS 파일을 파싱 -> CSSOM 생성

중단된 시점부터 HTML 파싱하여 DOM 생성

### 38.5 렌더 트리 생성

DOM과 CSSOM은 렌더트리로 결합, 브라우저 트리에 렌더링 되는 노드를로만 구성

### 38.6 자바스크립트 파싱과 실행

JS 파싱 실행은 JS엔진이 처리, JS를 파싱하여 저수준 언어로 변환, 실행

JS엔진은 JS를 해석하여 AST 추상적 구문 트리 생성

### 38.7 리플로우와 리페인트

JS가 DOM, CSSOM을 변경하는 DOM API를 사용하면

리플로우 : 레이아웃 계산을 다시

리페인트 : 재결합된 렌더 트리 기반 다시 페인트

### 38.8 자바스크립트 파싱에 의한 HTML 파싱 중단

렌더링 엔진, JS 엔진은 직렬적으로 파싱 수행

script 태그의 위치에 따라 파싱이 블로킹 -> DOM 생성의 지연

### 38.9 script 태그의 async/defer 어트리뷰트

JS 파싱에 의한 DOM 생성 중단 문제 해결을 위해 HTML5 부터 async/defer 추가

src 어트리뷰트를 통해 외부 JS 파일을 로드하는 경우에만 사용

```jsx
<script async src="extern.js"></script>
<script defer src="entern.js"></script>
```

HTML 파싱과 외부 JS 파일 로드가 비동기적으로 동시에 진행

#### async 어트리뷰트

HTML 파싱과 외부 JS 파일 로드가 비동기적으로 동시에 진행되지만

JS 파싱 실행은 JS 파일 로드가 완료된 직후 진행 (HTML 파싱 중단)

script 태그 순서와 상관 없이 로드 완료된 파일부터 실행되어 순서 보장이되지 않는다

### defer 어트리뷰트

async 와 같이 파일 로드가 비동기적 동시에 진행

JS 파싱과 실행은 HTML 파싱 완료 직후 진행 (DOM 생성 후 실행되어야 할 JS 스크립트에 유용)
