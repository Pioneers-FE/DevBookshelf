<aside>
<img src="/icons/notification_pink.svg" alt="/icons/notification_pink.svg" width="40px" />

DOM은 HTML 문서의 계층적 구조와 정보를 표현하며 이를 제어할 수 있는 API를 제공하는 자료구조

</aside>

### 39.1 노드

---

트리 자료구조

- 문서노드(document)
  - DOM 트리의 최상위
  - HTML 문서 전체
  - window 객체에 바인딩 되어 있음
  - HTML 문서 당 document 객체는 유일
- 요소노드
  - HTML 요소
- 어트리뷰트 노드
  - HTML 요소의 어트리뷰트
  - HTML 요소와 연결
- 텍스트 노드
  - 요소 노드의 자식 노드
  - DOM 트리의 최종단

노드 객체의 상속 구조

- 노드 객체는 DOM API를 사용할 수 있다
- 노드 객체는 표준 빌트인 객체 X, 호스트 객체
  - Object → EventTarget → Node → Element → HTMLElement → …
  - 모든 노드 객체는 Object, EventTarget, Node 인터페이스를 상속받는다
    - 공통적으로 이벤트 발생, style 프로퍼티
    - 노드 타입에 따라 필요한 기능을 프로퍼티와 메서드의 집합인 DOM API로 제공
- 노드 객체 상속 구조는 Elements 패널 우측 Properties(속성)에서 확인 가능

### 39.2 요소 노드 취득

---

요소 노드의 취득은 HTML 요소를 조작하는 시작점

- getElementById
- getElementsByName(’\*’) 모든 요소 노드 취득
- css 선택자
  ```tsx
  /* input 요소 중에 type이 text인 요소 */
  input[type=text] { ... }
  /* div 요소의 후손 요소 중 p 요소 모두 선택 */
  div p { ... }
  /* div 요소의 자식 요소 중 p 요소 모두 선택 */
  div > p { ... }
  /* p 요소의 형제 요소 중에 p 요소 바로 뒤에 위치하는 ul  */
  p + ul { ... }
  /* .. 그냥 뒤에 있으면 무조건 ..*/
  p ~ ul { ... }
  /* hover 상태인 a 요소 */
  a:hover { ... }
  /* p 요소의 콘텐츠 앞에 위치하는 공간. 일반적으로 content 프로퍼티와 함께 사용 */
  p::before { ... }
  ```

HTMLCollection 과 NodeList의 차이

- HTMLCollection : 노드 객체의 상태 변화를 실시간으로 반영.
- NodeList : 실시간으로 노드 객체 반영 X

자식 노드 탐색

- childNodes : NodeList에는 요소 노드 뿐만 아니라 텍스트 노드도 포함되어 있을 수 있다
- children: HTMLCollection에는 텍스트 노드가 포함되지 않는다
- hasChildNodes
- firstChild
- parentNode

형제 노드 탐색

- previousSibling : previousSibling이 반환하는 형제 노드는 요소 뿐 아니라 텍스트 노드일 수도 있다.
- nextSibling: (마찬가지)

텍스트 조작

- nodeValue: 읽기 전용
- textContent
- innerText
- innerHTML

innerHTML 프로퍼티에 할당한 HTML 마크업 문자열은 렌더링 엔진에 의해 파싱되어 요소 노드의 자식으로 DOM에 반영된다

- 입력 받은 데이터를 그대로 innerHTML에 할당하면 XSS 공격에 취약할 수 있음

노드 생성과 추가

- appendChild
- createTextContent

노드 복사

- cloneNode([ deep: true | false ]) : 모든 자손 노드가 포함된 사본 생성

### 39.7 어트리뷰트

---

- 글로벌 어트리뷰트(id, class, style,…)
- 이벤트 핸들러 어트리뷰트(onclick, onchange,…)
  - type, value, checked는 input요소에만 사용할 수 있다
- attricutes 프로퍼티는 읽기 전용(언제나 문자열)
  - getAttributes/setAttributes

HTML 어트리뷰트 vs DOM 프로퍼티

- DOM 프로퍼티들은 HTML 어트리뷰트 값을 초기값으로 가지고 있다
- HTML attr.의 역할 : HTML의 초기상태를 지정하는것
- 요소 노드 상태 관리
  - 초기 상태 → HTML attr
  - 최신 상태 → DOM 프로퍼티

사용자 정의 attr.

- data-뭐뭐뭐

### 39.8 스타일

---

클래스 조작

- class attr에 대응하는 DOM 프로퍼티는 class가 아니라 className, classList

DOMTokenList

- add, remove, item, contains, replace, toggle

요소에 적용되어 있는 CSS 스타일 참조

- HTML 요소에 적용되어 있는 모든 CSS 스타일을 참조해야할 경우 getComputedStyle 사용
- getComputedStyle(요소, ‘:before’ 또는 ‘:after’ 같은 의사 요소);

### 39.9 표준

---

HTML과 DOM 표준은 W3C과 WHATWG에서 표준 만들어놓음

- WHATWG
